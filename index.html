<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Brave Voice Adventures (Prototype)</title>
  <link rel="stylesheet" href="styles.css?v=4" />
</head>
<body>
  <header class="app-header">
    <h1>Brave Voice Adventures</h1>
    <p class="tagline">Where every choice builds confidence</p>
    <div class="header-controls">
      <button id="btnTherapistHeader" class="therapist-btn">🏥 Therapist Dashboard</button>
    </div>
  </header>

  <main class="app-main">
    <!-- HUD -->
    <section class="hud">
      <div class="meter">
        <label>Confidence</label>
        <div class="meter-bar">
          <div id="confidenceFill" class="meter-fill" style="width:50%"></div>
        </div>
        <span id="confidenceValue">5 / 10</span>
      </div>

      <div class="badges">
        <label>Badges</label>
        <div id="badgeList" class="badge-list"></div>
      </div>
    </section>

    <!-- Scene -->
    <section class="scene">
      <div id="sceneText" class="scene-text">
        <!-- Scene text populated by JS -->
      </div>
      <div id="choiceContainer" class="choices">
        <!-- Choice buttons populated by JS -->
      </div>
    </section>
  </main>

  <!-- Always Visible Controls -->
  <section class="controls">
    <button id="btnReplay" class="ghost">🏠 Main Menu</button>
    <button id="btnPractice" class="primary">🎤 Practice Brave Voice</button>
    <button id="btnShield" class="secondary">🛡️ Design Shield</button>
    <button id="btnParent" class="ghost">👨‍👩‍👧‍👦 Parent Zone</button>
    <button id="btnTherapist" class="primary">🏥 Therapist Dashboard</button>
    <button id="btnReset" class="danger">🔄 Reset Progress</button>
  </section>

  <!-- Brave Voice Builder Modal -->
  <div id="builderModal" class="modal hidden">
    <div class="modal-card">
      <h2>Practice Your Brave Voice</h2>
      <p class="helper">Use the structure: <strong>I feel ___ when you ___. Please ___.</strong></p>

      <div class="builder-grid">
        <div>
          <label for="feelSelect">I feel…</label>
          <select id="feelSelect">
            <option value="sad">sad</option>
            <option value="upset">upset</option>
            <option value="embarrassed">embarrassed</option>
            <option value="angry">angry</option>
            <option value="frustrated">frustrated</option>
            <option value="nervous">nervous</option>
          </select>
        </div>
        <div>
          <label for="whenInput">when you…</label>
          <input id="whenInput" type="text" placeholder="make fun of my art" />
        </div>
        <div>
          <label for="pleaseInput">Please…</label>
          <input id="pleaseInput" type="text" placeholder="stop." />
        </div>
      </div>

      <div class="preview">
        <label>Preview</label>
        <div id="previewText" class="preview-text">
          I feel upset when you make fun of my art. Please stop.
        </div>
      </div>

      <div class="modal-actions">
        <button id="btnCloseModal" class="ghost">Close</button>
        <button id="btnPracticeSpeech" class="secondary">🎤 Practice Speaking</button>
        <button id="btnSaveLine" class="primary">Save Line</button>
      </div>
    </div>
  </div>

  <!-- Shield Designer Modal -->
  <div id="shieldModal" class="modal hidden">
    <div class="modal-card">
      <h2>🛡️ Design Your Brave Voice Shield</h2>
      <p class="helper">Create a shield that represents your brave voice and inner strength!</p>

      <div class="shield-designer">
        <div class="canvas-container">
          <canvas id="shieldCanvas" width="300" height="300"></canvas>
        </div>
        
        <div class="design-tools">
          <div class="tool-group">
            <label>🎨 Brush Color</label>
            <input type="color" id="colorPicker" value="#3b82f6" />
          </div>
          
          <div class="tool-group">
            <label>📏 Brush Size</label>
            <input type="range" id="brushSize" min="2" max="20" value="5" />
            <span id="brushSizeDisplay">5px</span>
          </div>
          
          <div class="tool-group">
            <label>✨ Add Stickers</label>
            <div class="sticker-tray">
              <button class="sticker-btn" data-sticker="⭐">⭐</button>
              <button class="sticker-btn" data-sticker="💪">💪</button>
              <button class="sticker-btn" data-sticker="🌟">🌟</button>
              <button class="sticker-btn" data-sticker="🏆">🏆</button>
              <button class="sticker-btn" data-sticker="❤️">❤️</button>
              <button class="sticker-btn" data-sticker="🎯">🎯</button>
            </div>
          </div>
        </div>
      </div>

      <div class="modal-actions">
        <button id="btnClearCanvas" class="ghost">🗑️ Clear</button>
        <button id="btnCloseShield" class="ghost">Close</button>
        <button id="btnSaveShield" class="primary">💾 Save Shield</button>
      </div>
    </div>
  </div>

  <!-- Parent Zone Modal -->
  <div id="parentModal" class="modal hidden">
    <div class="modal-card">
      <h2>👨‍👩‍👧‍👦 Parent Zone</h2>
      <div id="parentContent" class="parent-content">
        <!-- PIN entry will be shown first, then parent dashboard -->
      </div>
    </div>
  </div>

  <footer class="app-footer">
    <small>Prototype • JSON-driven story engine • © Brave Voice Adventures</small>
  </footer>

  <script src="storyData.js?v=2"></script>
  <script src="main.js?v=3"></script>
</body>
</html>